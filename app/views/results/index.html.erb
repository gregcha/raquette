<div class="container">
  <div class="row">
    <div class="col s12">
    </div>
  </div>
</div>


<div class='column is-half is-offset-one-quarter is-mobile'>
  <%= link_to 'Nouvelle recherche', page_path('home') %>
  <!-- RESULTS -->
  <div class="column is-12 is-mobile">
    <%= @results.count %> courts disponibles</p>

    <% @results_by_venue_by_hour.each do |venue, results_by_hour| %>
      <div class='grouped_results'>
        <h4><%= venue %></h4>
        <table>
          <% results_by_hour.each do |hour, results| %>
            <tr>
              <td><%= hour %></td>
              <% results.each do |result| %>
                <td>Court n°<%= result.court.court_number %></td>
              <% end%>
            </tr>
          <% end%>
        </table>
      </div>
    <% end%>

  </div>
</div>
















<div class='column is-half is-offset-one-quarter is-mobile is-hidden'>
  <%= link_to 'Nouvelle recherche', page_path('home') %>
  <!-- RESULTS -->
  <div class="column is-12 is-mobile">
    <%= @results.count %> courts disponibles</p>
    <table>
      <tr>
        <th><%= sortable "pt_id", 'Tennis' %></th>
        <th><%= sortable "pt_court_id", 'Court' %></th>
        <th><%= sortable "date", 'Date' %></th>
        <th><%= sortable "hour", 'Heure' %></th>
      </tr>
      <% @results.each do |result| %>
        <tr>
          <% court = Court.where(pt_court_id: result[:pt_court_id]).first %>
          <td><%= court.venue.name + ' - ' + court.venue.district.to_s + 'ème' %></td>
          <td>Court n°<%= court.court_number %></td>
          <td><%= result[:date]%></td>
          <td><%= result[:hour]%>h</td>
          <td class='is-hidden'>
            <%= form_tag bookings_path do %>
              <%= hidden_field_tag :pt_court_id, result[:pt_court_id] %>
              <%= hidden_field_tag :pt_id, result[:pt_id] %>
              <%= hidden_field_tag :date, result[:date] %>
              <%= hidden_field_tag :hour, result[:hour] %>
              <%= hidden_field_tag :cle, result[:cle] %>
              <%= hidden_field_tag :libelleReservation, result[:libelleReservation] %>
              <%= select_tag :account_id, options_for_select(@my_accounts), class:'form-control' %>
              <%= submit_tag "Réserver", class:'btn btn-success'  %>
            <% end %>
          </td>
        </tr>
      <% end%>
    </table>
  </div>
</div>
